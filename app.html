<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowmind - Web App</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages/music.css">
    <link rel="stylesheet" href="css/pages/timer.css">
    <link rel="stylesheet" href="css/pages/calendar.css">
    <link rel="stylesheet" href="css/pages/stats.css">
    <link rel="stylesheet" href="css/pages/student.css">
    <link rel="stylesheet" href="css/pages/sounds.css">
    <link rel="stylesheet" href="css/pages/focus.css">
    <link rel="stylesheet" href="css/pages/profile.css">
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="logo-section">
            <div class="logo-icon">üß†</div>
            <div class="logo-text">
                <h2>Flowmind</h2>
                <p>Il tuo flow personale</p>
            </div>
        </div>

        <nav>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" data-page="music">
                        <span class="nav-icon">üéµ</span>
                        <span>Musica Personalizzata</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="timer">
                        <span class="nav-icon">‚è±Ô∏è</span>
                        <span>Timer Pomodoro</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="calendar">
                        <span class="nav-icon">üß†</span>
                        <span>Calendario Smart</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="student">
                        <span class="nav-icon">üéì</span>
                        <span>Student Section</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="profile">
                        <span class="nav-icon">üë§</span>
                        <span>Profilo</span>
                    </a>
                </li>

            </ul>
        </nav>

        <div class="user-section" onclick="Navigation.showPage('profile')">
            <div class="user-avatar" id="userAvatar">EN</div>
            <div class="user-info">
                <h4 id="userName">Emanuele Nasta</h4>
                <p id="userPlan">Premium Member</p>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">

        <!-- Music Page -->
        <div class="page active" id="music-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üéµ Musica Personalizzata</h1>
                        <p class="page-subtitle">L'AI seleziona la musica perfetta per il tuo stato mentale</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Scegli la tua modalit√†</h3>
                <div class="grid-3">
                    <div class="music-category" onclick="MusicPage.selectMode('focus')">
                        <div class="music-icon">‚òÄÔ∏è</div>
                        <h3>Focus Profondo</h3>
                        <p>Concentrazione massima</p>
                    </div>
                    <div class="music-category" onclick="MusicPage.selectMode('creative')">
                        <div class="music-icon">üé®</div>
                        <h3>Creativo</h3>
                        <p>Stimola l'ispirazione</p>
                    </div>
                    <div class="music-category" onclick="MusicPage.selectMode('relax')">
                        <div class="music-icon">üßò</div>
                        <h3>Relax</h3>
                        <p>Rigenerazione mentale</p>
                    </div>
                    <div class="music-category" onclick="MusicPage.selectMode('energy')">
                        <div class="music-icon">‚ö°</div>
                        <h3>Energia</h3>
                        <p>Carica mattutina</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Playlist AI Generate</h3>
                    <button class="btn btn-primary" onclick="MusicPage.generatePlaylist()">üîÑ Rigenera</button>
                </div>
                <div id="playlist-container">
                    <div class="playlist-item active" onclick="MusicPage.playTrack(0)">
                        <div class="playlist-icon">üéº</div>
                        <div>
                            <h4>Deep Focus Flow</h4>
                            <p style="color: #999;">Ambient ‚Ä¢ 45 min</p>
                        </div>
                    </div>
                    <div class="playlist-item" onclick="MusicPage.playTrack(1)">
                        <div class="playlist-icon">üéπ</div>
                        <div>
                            <h4>Calm Piano Sessions</h4>
                            <p style="color: #999;">Classical ‚Ä¢ 38 min</p>
                        </div>
                    </div>
                    <div class="playlist-item" onclick="MusicPage.playTrack(2)">
                        <div class="playlist-icon">üé∏</div>
                        <div>
                            <h4>Lo-fi Study Beats</h4>
                            <p style="color: #999;">Lo-fi ‚Ä¢ 52 min</p>
                        </div>
                    </div>
                </div>

                <div class="player-controls">
                    <button class="control-btn" onclick="MusicPage.previousTrack()">‚èÆÔ∏è</button>
                    <button class="control-btn play" id="musicPlayBtn" onclick="toggleMusicPlay()">‚ñ∂Ô∏è</button>
                    <button class="control-btn" onclick="MusicPage.nextTrack()">‚è≠Ô∏è</button>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">üåä Suoni Ambientali</h3>
                <p class="page-subtitle" style="margin-bottom: 1rem;">Crea l'atmosfera perfetta per la concentrazione</p>
                <div class="grid-3">
                    <div class="sound-card" onclick="toggleSoundCard(this, 'rain')">
                        <div class="sound-icon">üåßÔ∏è</div>
                        <h4>Pioggia</h4>
                        <p style="color: var(--text-secondary);">Pioggia rilassante</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'rain')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'waves')">
                        <div class="sound-icon">üåä</div>
                        <h4>Onde del Mare</h4>
                        <p style="color: var(--text-secondary);">Onde sulla spiaggia</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'waves')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'forest')">
                        <div class="sound-icon">üå≤</div>
                        <h4>Foresta</h4>
                        <p style="color: var(--text-secondary);">Natura e uccelli</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'forest')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'fire')">
                        <div class="sound-icon">üî•</div>
                        <h4>Camino</h4>
                        <p style="color: var(--text-secondary);">Fuoco scoppiettante</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'fire')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'cafe')">
                        <div class="sound-icon">‚òï</div>
                        <h4>Caffetteria</h4>
                        <p style="color: var(--text-secondary);">Chiacchiere di fondo</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'cafe')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'whitenoise')">
                        <div class="sound-icon">üìª</div>
                        <h4>Rumore Bianco</h4>
                        <p style="color: var(--text-secondary);">Blocca distrazioni</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'whitenoise')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'thunder')">
                        <div class="sound-icon">‚õàÔ∏è</div>
                        <h4>Temporale</h4>
                        <p style="color: var(--text-secondary);">Tuoni e pioggia</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'thunder')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'wind')">
                        <div class="sound-icon">üí®</div>
                        <h4>Vento</h4>
                        <p style="color: var(--text-secondary);">Brezza leggera</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'wind')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'night')">
                        <div class="sound-icon">üåô</div>
                        <h4>Notte</h4>
                        <p style="color: var(--text-secondary);">Grilli notturni</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'night')">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Mix Personalizzati</h3>
                    <button class="btn btn-primary" onclick="saveSoundMix()">üíæ Salva Mix</button>
                </div>
                <div class="grid-2">
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('focus')">
                        <h4 style="margin-bottom: 1rem;">üéØ Focus Intenso</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Pioggia + Rumore Bianco + Camino</p>
                    </div>
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('relax')">
                        <h4 style="margin-bottom: 1rem;">üßò Relax Totale</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Onde + Foresta + Vento</p>
                    </div>
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('study')">
                        <h4 style="margin-bottom: 1rem;">üìö Studio</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Caffetteria + Pioggia Leggera</p>
                    </div>
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('sleep')">
                        <h4 style="margin-bottom: 1rem;">üò¥ Sonno</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Notte + Onde + Camino</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timer Page -->
        <div class="page" id="timer-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>‚è±Ô∏è Timer Pomodoro</h1>
                        <p class="page-subtitle">Gestisci il tuo tempo con la tecnica Pomodoro</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="timer-display">
                    <div class="timer-label">Sessione di Focus</div>
                    <div class="timer-circle">
                        <div class="timer-time" id="timerDisplay">25:00</div>
                    </div>
                    <div class="player-controls">
                        <button class="control-btn play" id="timerPlayBtn" onclick="toggleTimerPlay()">‚ñ∂Ô∏è</button>
                        <button class="control-btn" onclick="TimerPage.reset()">‚èπÔ∏è</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Preset Timer</h3>
                <div class="timer-presets">
                    <button class="preset-btn active" onclick="setTimerPreset(25, event)">Pomodoro (25m)</button>
                    <button class="preset-btn" onclick="setTimerPreset(5, event)">Pausa Breve (5m)</button>
                    <button class="preset-btn" onclick="setTimerPreset(15, event)">Pausa Lunga (15m)</button>
                    <button class="preset-btn" onclick="setTimerPreset(50, event)">Deep Work (50m)</button>
                </div>
            </div>

            <div class="card focus-mode-card">
                <h2 style="margin-bottom: 1rem;">üéØ Modalit√† Focus</h2>
                <p style="opacity: 0.9; margin-bottom: 2rem;">Zero distrazioni, massima concentrazione</p>
                <div class="focus-timer" id="focusTimer">45:00</div>
                <div class="player-controls">
                    <button class="control-btn play" id="focusPlayBtn" onclick="toggleFocusPlay()">‚ñ∂Ô∏è</button>
                    <button class="control-btn" onclick="FocusPage.end()">‚èπÔ∏è</button>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Blocco Distrazioni</h3>
                <div class="distraction-blocker">
                    <div class="blocker-item">
                        <span>üì± Notifiche</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'notifications')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="blocker-item">
                        <span>üåê Social Media</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'social')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="blocker-item">
                        <span>üìß Email</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'email')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="blocker-item">
                        <span>üí¨ Chat</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'chat')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Citazione Motivazionale</h3>
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 2rem; margin-bottom: 1rem;">üí≠</div>
                    <p style="font-size: 1.3rem; font-style: italic; color: var(--text-primary); margin-bottom: 1rem;">
                        "La concentrazione √® la radice di tutte le abilit√† superiori dell'uomo."
                    </p>
                    <p style="color: var(--text-secondary);">‚Äî Bruce Lee</p>
                </div>
            </div>
        </div>
        <!-- AI Calendar Page -->
        <div class="page" id="calendar-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üß† Calendario Intelligente</h1>
                        <p class="page-subtitle">
                            L'AI organizza i tuoi impegni in modo ottimale
                        </p>
                    </div>
                </div>
            </div>


            <!-- Quick Add Task -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚ûï Aggiungi Impegno</h3>
                    <button class="btn btn-primary" onclick="AIPage.openTaskModal()">
                        Nuovo Impegno
                    </button>
                </div>
                <div id="quickAddForm" style="display: none; animation: slideDown 0.3s ease;">
                    <div class="form-group">
                        <label>Titolo Impegno</label>
                        <input type="text" id="taskTitle" placeholder="es. Riunione team, Studio progetto..."
                            class="form-input">
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Durata (minuti)</label>
                            <input type="number" id="taskDuration" placeholder="60" class="form-input" min="15"
                                step="15">
                        </div>
                        <div class="form-group">
                            <label>Priorit√†</label>
                            <select id="taskPriority" class="form-input">
                                <option value="alta">üî¥ Alta</option>
                                <option value="media" selected>üü° Media</option>
                                <option value="bassa">üü¢ Bassa</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Orario Specifico</label>
                            <input type="time" id="taskTime" class="form-input">
                            <small style="color: var(--text-secondary)">Lascia vuoto per suggerimento AI</small>
                        </div>
                        <div class="form-group">
                            <label>Frequenza</label>
                            <select id="taskFrequency" class="form-input" onchange="AIPage.handleFrequencyChange()">
                                <option value="once">Una volta (data specifica)</option>
                                <option value="daily">Giornaliero</option>
                                <option value="weekly">Settimanale</option>
                                <option value="multiple">Pi√π volte alla settimana</option>
                                <option value="monthly">Mensile</option>
                            </select>
                        </div>
                    </div>

                    <!-- Data Specifica per eventi "Una volta" -->
                    <div id="specificDateField" class="form-group" style="display: none;">
                        <label>üìÖ Data Evento</label>
                        <input type="date" id="taskDate" class="form-input">
                    </div>

                    <!-- Selezione giorni per frequenza settimanale/multipla -->
                    <div id="weekDaysField" class="form-group" style="display: none;">
                        <label>üìÜ Seleziona i giorni della settimana</label>
                        <div class="weekdays-selector">
                            <button type="button" class="weekday-btn" data-day="1" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Lun</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="2" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Mar</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="3" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Mer</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="4" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Gio</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="5" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Ven</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="6" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Sab</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="0" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Dom</span>
                            </button>
                        </div>
                        <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                            Clicca sui giorni per selezionarli/deselezionarli
                        </small>
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="taskCategory" class="form-input">
                            <option value="lavoro">üíº Lavoro</option>
                            <option value="studio">üìö Studio</option>
                            <option value="personale">üè† Personale</option>
                            <option value="sport">‚ö° Sport</option>
                            <option value="hobby">üé® Hobby</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-primary" onclick="AIPage.addTask()" style="flex: 1;">
                            ‚ú® Aggiungi con AI
                        </button>
                        <button class="btn btn-secondary" onclick="AIPage.closeTaskModal()">
                            Annulla
                        </button>
                    </div>
                </div>
            </div>

            <!-- AI Suggestions -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üí° Suggerimenti AI</h3>
                    <button class="btn btn-secondary" onclick="AIPage.analyzeSchedule()"
                        style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        üîÑ Analizza
                    </button>
                </div>
                <div id="aiSuggestions">
                    <div class="ai-suggestion">
                        <h4>üéØ Momento Ottimale Rilevato</h4>
                        <p>Basandoci sui tuoi pattern, le ore 10:00-12:00 sono ideali per attivit√† che richiedono alta
                            concentrazione.</p>
                    </div>
                    <div class="ai-suggestion">
                        <h4>‚ö†Ô∏è Sovraccarico Previsto</h4>
                        <p>Gioved√¨ hai 6 ore di impegni consecutivi. Considera di spostare qualche attivit√† a bassa
                            priorit√†.</p>
                    </div>
                </div>
            </div>

            <!-- Weekly Calendar View -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üìÖ Settimana Corrente</h3>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" onclick="AIPage.previousWeek()">‚óÄ</button>
                        <button class="btn btn-secondary" onclick="AIPage.nextWeek()">‚ñ∂</button>
                    </div>
                </div>
                <div id="weeklyCalendar" class="weekly-calendar">
                    <!-- Calendar will be generated here -->
                </div>
            </div>

            <!-- Today's Tasks -->
            <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìã Impegni di Oggi</h3>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-secondary" onclick="AIPage.clearCompletedTasks()"
                                title="Rimuovi impegni completati" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                                üóëÔ∏è Completati
                            </button>
                            <button class="btn btn-secondary" onclick="AIPage.clearPastTasks()"
                                title="Rimuovi eventi passati" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                                üßπ Passati
                            </button>
                        </div>
                    </div>
                    <div id="todayTasks" class="task-list">
                        <div class="task-item priority-alta">
                            <div class="task-time">09:00 - 10:30</div>
                            <div class="task-content">
                                <h4>üíº Riunione Team</h4>
                                <p>Lavoro ‚Ä¢ 90 minuti</p>
                            </div>
                            <div class="task-actions">
                                <button onclick="AIPage.completeTask(0)">‚úì</button>
                                <button onclick="AIPage.editTask(0)">‚úèÔ∏è</button>
                                <button onclick="AIPage.deleteTask(0)">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div class="task-item priority-media">
                            <div class="task-time">11:00 - 12:00</div>
                            <div class="task-content">
                                <h4>üìö Studio React</h4>
                                <p>Studio ‚Ä¢ 60 minuti</p>
                            </div>
                            <div class="task-actions">
                                <button onclick="AIPage.completeTask(1)">‚úì</button>
                                <button onclick="AIPage.editTask(1)">‚úèÔ∏è</button>
                                <button onclick="AIPage.deleteTask(1)">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div class="task-item priority-bassa">
                            <div class="task-time">Suggerito: 14:00</div>
                            <div class="task-content">
                                <h4>üè† Spesa settimanale</h4>
                                <p>Personale ‚Ä¢ 45 minuti</p>
                            </div>
                            <div class="task-actions">
                                <button onclick="AIPage.completeTask(2)">‚úì</button>
                                <button onclick="AIPage.editTask(2)">‚úèÔ∏è</button>
                                <button onclick="AIPage.deleteTask(2)">üóëÔ∏è</button>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
        <!-- Student Plan Page -->
        <div class="page" id="student-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üéì Piano Studente Pro</h1>
                        <p class="page-subtitle">
                            L'AI pianifica il tuo studio e ti prepara per le verifiche
                        </p>
                    </div>
                </div>
            </div>

            <!-- Add New Exam/Test -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚ûï Nuova Verifica/Interrogazione</h3>
                    <button class="btn btn-primary" onclick="StudentPage.openExamModal()">
                        Aggiungi Prova
                    </button>
                </div>
                <div id="examForm" style="display: none; animation: slideDown 0.3s ease;">
                    <div class="form-group">
                        <label>Materia</label>
                        <input type="text" id="examSubject" placeholder="es. Matematica, Storia..." class="form-input">
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Tipo di Prova</label>
                            <select id="examType" class="form-input">
                                <option value="verifica">üìù Verifica Scritta</option>
                                <option value="interrogazione">üó£Ô∏è Interrogazione Orale</option>
                                <option value="compito">üìÑ Compito in Classe</option>
                                <option value="esame">üéØ Esame</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data della Prova</label>
                            <input type="date" id="examDate" class="form-input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Argomenti da Studiare</label>
                        <textarea id="examTopics"
                            placeholder="Inserisci gli argomenti separati da virgola&#10;es. Equazioni di secondo grado, Parabola, Teorema di Pitagora..."
                            class="form-input" rows="4"></textarea>
                        <small style="color: var(--text-secondary);">Separa gli argomenti con una virgola</small>
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Ore di Studio al Giorno</label>
                            <input type="number" id="studyHoursPerDay" placeholder="2" class="form-input" min="0.5"
                                max="8" step="0.5" value="2">
                        </div>
                        <div class="form-group">
                            <label>Ore di Esercitazione al Giorno</label>
                            <input type="number" id="practiceHoursPerDay" placeholder="1" class="form-input" min="0"
                                max="6" step="0.5" value="1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Difficolt√† Percepita</label>
                        <select id="examDifficulty" class="form-input">
                            <option value="facile">üü¢ Facile</option>
                            <option value="media" selected>üü° Media</option>
                            <option value="difficile">üî¥ Difficile</option>
                            <option value="molto-difficile">üî¥üî¥ Molto Difficile</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button type="button" class="btn btn-primary"
                            onclick="StudentPage.generateStudyPlan(); return false;" style="flex: 1;">
                            ‚ú® Genera Piano di Studio AI
                        </button>
                        <button type="button" class="btn btn-secondary"
                            onclick="StudentPage.closeExamModal(); return false;">
                            Annulla
                        </button>
                    </div>
                </div>
            </div>

            <!-- Active Study Plans -->
            <div class="card">
                <h3 class="card-title">üìö Piani di Studio Attivi</h3>
                <div id="activePlans" class="study-plans-container">
                    <!-- Plans will be rendered here -->
                </div>
            </div>

            <!-- Today's Study Sessions -->
            <div class="card">
                    <h3 class="card-title">üìñ Sessioni di Oggi</h3>
                    <div id="todaySessions" class="sessions-list">
                        <!-- Today's sessions -->
                    </div>
            </div>

            <!-- Oral Test Practice (Interrogazione) -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üó£Ô∏è Simulatore Interrogazione Orale</h3>
                </div>
                <p class="page-subtitle" style="margin-bottom: 1.25rem;">Seleziona una materia e preparati con l'AI che ti far√† domande come un vero professore</p>

                <div id="oralTestSelector">
                    <div class="form-group">
                        <label>Seleziona la Materia</label>
                        <select id="quizSubject" class="form-input" onchange="StudentPage.onOralSubjectChange()">
                            <option value="">-- Scegli una materia dai tuoi piani attivi --</option>
                        </select>
                    </div>

                    <!-- Subject preview card (shown when a subject is selected) -->
                    <div id="oralSubjectPreview" style="display: none;">
                        <div class="oral-subject-card">
                            <div class="oral-subject-info">
                                <div class="oral-subject-icon">üó£Ô∏è</div>
                                <div>
                                    <h4 id="oralSubjectName"></h4>
                                    <p id="oralSubjectDetails" style="color: var(--text-secondary); font-size: 0.88rem;"></p>
                                </div>
                            </div>
                            <div id="oralSubjectTopics" class="oral-topics-list"></div>
                            <button class="btn btn-primary" onclick="StudentPage.startAIQuiz()" style="width: 100%; margin-top: 1rem; justify-content: center;">
                                üéØ Inizia Interrogazione Orale
                            </button>
                        </div>
                    </div>
                </div>

                <div id="quizContainer" style="display: none;">
                    <div class="quiz-interface">
                        <div id="quizArea" style="display: none;">
                            <div class="quiz-question-box">
                                <h4>Domanda del Professore AI:</h4>
                                <p id="quizQuestion"
                                    style="font-size: 1.05rem; line-height: 1.8; padding: 1rem; background: var(--bg-main); border-radius: 10px; margin: 1rem 0;">
                                </p>
                            </div>
                            <div class="form-group">
                                <label>La Tua Risposta:</label>
                                <textarea id="quizAnswer" class="form-input" rows="6"
                                    placeholder="Rispondi come faresti a voce durante un'interrogazione..."></textarea>
                            </div>
                            <div style="display: flex; gap: 0.75rem; margin-top: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="StudentPage.submitAnswer()" style="flex: 1;">
                                    üì§ Invia Risposta
                                </button>
                                <button class="btn btn-secondary" onclick="StudentPage.nextQuestion()">
                                    ‚è≠Ô∏è Prossima
                                </button>
                                <button class="btn btn-secondary" onclick="StudentPage.endQuiz()">
                                    ‚èπÔ∏è Termina
                                </button>
                            </div>
                        </div>
                        <div id="quizFeedback" style="display: none; margin-top: 1.5rem;">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Written Test Practice (Verifica Scritta) -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üìù Simulatore Verifica Scritta</h3>
                </div>
                <p class="page-subtitle" style="margin-bottom: 1.25rem;">Esercitati con domande scritte e ricevi una valutazione AI</p>

                <div id="writtenTestSelector">
                    <div class="form-group">
                        <label>Seleziona la Materia</label>
                        <select id="writtenSubject" class="form-input" onchange="StudentPage.onWrittenSubjectChange()">
                            <option value="">-- Scegli una materia dai tuoi piani attivi --</option>
                        </select>
                    </div>

                    <div id="writtenSubjectPreview" style="display: none;">
                        <div class="oral-subject-card">
                            <div class="oral-subject-info">
                                <div class="oral-subject-icon">üìù</div>
                                <div>
                                    <h4 id="writtenSubjectName"></h4>
                                    <p id="writtenSubjectDetails" style="color: var(--text-secondary); font-size: 0.88rem;"></p>
                                </div>
                            </div>
                            <div id="writtenSubjectTopics" class="oral-topics-list"></div>

                            <div class="form-group" style="margin-top: 1rem;">
                                <label>Numero di Domande</label>
                                <select id="writtenQuestionCount" class="form-input">
                                    <option value="3">3 domande (breve)</option>
                                    <option value="5" selected>5 domande (standard)</option>
                                    <option value="8">8 domande (completa)</option>
                                    <option value="10">10 domande (simulazione esame)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Tipo di Domande</label>
                                <select id="writtenQuestionType" class="form-input">
                                    <option value="open">üìù Domande aperte</option>
                                    <option value="mixed">üîÄ Miste (aperte + definizioni)</option>
                                    <option value="definitions">üìñ Definizioni</option>
                                    <option value="exercises">‚úçÔ∏è Esercizi pratici</option>
                                </select>
                            </div>

                            <button class="btn btn-primary" onclick="StudentPage.startWrittenTest()" style="width: 100%; margin-top: 0.5rem; justify-content: center;">
                                üìÑ Genera Verifica Scritta
                            </button>
                        </div>
                    </div>
                </div>

                <div id="writtenTestContainer" style="display: none;">
                    <div class="written-test-interface">
                        <div class="written-test-header">
                            <h4 id="writtenTestTitle">Verifica di Matematica</h4>
                            <p id="writtenTestInfo" style="color: var(--text-secondary); font-size: 0.88rem;"></p>
                        </div>
                        <div id="writtenQuestions" class="written-questions-list">
                        </div>
                        <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                            <button class="btn btn-primary" onclick="StudentPage.submitWrittenTest()" style="flex: 1;">
                                üì§ Consegna Verifica
                            </button>
                            <button class="btn btn-secondary" onclick="StudentPage.cancelWrittenTest()">
                                ‚ùå Annulla
                            </button>
                        </div>
                    </div>
                </div>
                <div id="writtenTestFeedback" style="display: none; margin-top: 1.5rem;">
                </div>
            </div>

            <!-- Completed Exams -->
            <div class="card">
                <h3 class="card-title">‚úÖ Prove Completate</h3>
                <div id="completedExams" class="completed-exams-list">
                    <!-- Completed exams with grades -->
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profile-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üë§ Profilo</h1>
                        <p class="page-subtitle">Gestisci il tuo profilo e controlla le statistiche</p>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar" id="profileAvatar">EN</div>
                        <div>
                            <h3 id="profileDisplayName">Emanuele Nasta</h3>
                            <p id="profileDisplayPlan" class="profile-subtitle">Premium Member</p>
                        </div>
                    </div>
                    <form id="profileForm" class="profile-form">
                        <div class="form-group">
                            <label>Nome e Cognome</label>
                            <input type="text" id="profileName" class="form-input" placeholder="Il tuo nome" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="profileEmail" class="form-input" placeholder="nome@email.com">
                        </div>
                        <div class="form-group">
                            <label>Piano</label>
                            <select id="profilePlan" class="form-input">
                                <option value="Free">Free</option>
                                <option value="Premium Member" selected>Premium Member</option>
                                <option value="Pro">Pro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Obiettivo di studio</label>
                            <input type="text" id="profileGoal" class="form-input" placeholder="Es. 2 ore al giorno">
                        </div>
                        <button type="submit" class="btn btn-primary">üíæ Salva Profilo</button>
                    </form>
                </div>

                <div class="card">
                    <h3 class="card-title">üìä Le tue Statistiche</h3>
                    <div class="profile-stats">
                        <div class="stat-box">
                            <div>üî•</div>
                            <div class="stat-value">14</div>
                            <div class="stat-label">Giorni di Streak</div>
                        </div>
                        <div class="stat-box">
                            <div>‚è±Ô∏è</div>
                            <div class="stat-value">28h</div>
                            <div class="stat-label">Tempo Focus Totale</div>
                        </div>
                        <div class="stat-box">
                            <div>‚úÖ</div>
                            <div class="stat-value">47</div>
                            <div class="stat-label">Sessioni Completate</div>
                        </div>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <h3 class="card-title">üìö Statistiche Studio</h3>
                        <div class="stats-grid" style="margin-top: 1rem;">
                            <div class="stat-item">
                                <div class="stat-icon">üìö</div>
                                <div class="stat-value" id="totalStudyHours">0h</div>
                                <div class="stat-label">Ore Studiate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">‚úÖ</div>
                                <div class="stat-value" id="completedSessions">0</div>
                                <div class="stat-label">Sessioni Completate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-value" id="averageGrade">-</div>
                                <div class="stat-label">Media Voti</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">üî•</div>
                                <div class="stat-value" id="studyStreak">0</div>
                                <div class="stat-label">Giorni Consecutivi</div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 1.5rem;">
                        <h3 class="card-title">Obiettivi Attivi</h3>
                        <div style="padding: 1rem 0;">
                            <div style="margin-bottom: 1.2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span>üéØ 100 ore focus</span>
                                    <span style="font-weight: bold;">28/100h</span>
                                </div>
                                <div
                                    style="height: 10px; background: var(--bg-main); border-radius: 6px; overflow: hidden;">
                                    <div
                                        style="width: 28%; height: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary));">
                                    </div>
                                </div>
                            </div>
                            <div style="margin-bottom: 1.2rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span>üî• 30 giorni streak</span>
                                    <span style="font-weight: bold;">14/30</span>
                                </div>
                                <div
                                    style="height: 10px; background: var(--bg-main); border-radius: 6px; overflow: hidden;">
                                    <div
                                        style="width: 47%; height: 100%; background: linear-gradient(90deg, var(--warning), var(--danger));">
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span>‚úÖ 200 pomodori</span>
                                    <span style="font-weight: bold;">47/200</span>
                                </div>
                                <div
                                    style="height: 10px; background: var(--bg-main); border-radius: 6px; overflow: hidden;">
                                    <div
                                        style="width: 24%; height: 100%; background: linear-gradient(90deg, var(--success), var(--info));">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav" id="mobileBottomNav" aria-label="Navigazione rapida">
        <button type="button" class="mobile-nav-btn active" data-page="music" aria-label="Musica">
            <span class="mobile-nav-icon">üéµ</span>
            <span class="mobile-nav-label">Musica</span>
        </button>
        <button type="button" class="mobile-nav-btn" data-page="timer" aria-label="Timer">
            <span class="mobile-nav-icon">‚è±Ô∏è</span>
            <span class="mobile-nav-label">Timer</span>
        </button>
        <button type="button" class="mobile-nav-btn" data-page="calendar" aria-label="Calendario">
            <span class="mobile-nav-icon">üìÖ</span>
            <span class="mobile-nav-label">Calendario</span>
        </button>
        <button type="button" class="mobile-nav-btn" data-page="student" aria-label="Studenti">
            <span class="mobile-nav-icon">üéì</span>
            <span class="mobile-nav-label">Studenti</span>
        </button>
        <button type="button" class="mobile-nav-btn" data-page="profile" aria-label="Profilo">
            <span class="mobile-nav-icon">üë§</span>
            <span class="mobile-nav-label">Profilo</span>
        </button>
    </nav>

    <!-- JavaScript Files -->
    <script src="js/storage.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/pages/music.js"></script>
    <script src="js/pages/timer.js"></script>
    <script src="js/pages/calendar.js"></script>
    <script src="js/pages/stats.js"></script>
    <script src="js/pages/sounds.js"></script>
    <script src="js/pages/focus.js"></script>
    <script src="js/pages/student.js"></script>
    <script src="js/app.js"></script>

</body>

</html>