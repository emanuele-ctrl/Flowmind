<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowmind - Web App</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/pages/music.css">
    <link rel="stylesheet" href="css/pages/timer.css">
    <link rel="stylesheet" href="css/pages/calendar.css">
    <link rel="stylesheet" href="css/pages/stats.css">
    <link rel="stylesheet" href="css/pages/student.css">
    <link rel="stylesheet" href="css/pages/sounds.css">
    <link rel="stylesheet" href="css/pages/focus.css">
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="logo-section">
            <div class="logo-icon">üß†</div>
            <div class="logo-text">
                <h2>Flowmind</h2>
                <p>Il tuo flow personale</p>
            </div>
        </div>

        <nav>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a class="nav-link active" data-page="music">
                        <span class="nav-icon">üéµ</span>
                        <span>Musica Personalizzata</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="timer">
                        <span class="nav-icon">‚è±Ô∏è</span>
                        <span>Timer Pomodoro</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="calendar">
                        <span class="nav-icon">üß†</span>
                        <span>Calendario Smart</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" data-page="student">
                        <span class="nav-icon">üéµ</span>
                        <span>Student Section</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="stats">
                        <span class="nav-icon">üìä</span>
                        <span>Statistiche</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="sounds">
                        <span class="nav-icon">üåä</span>
                        <span>Suoni Ambientali</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-page="focus">
                        <span class="nav-icon">üéØ</span>
                        <span>Modalit√† Focus</span>
                    </a>
                </li>

            </ul>
        </nav>

        <div class="user-section">
            <div class="user-avatar">EN</div>
            <div class="user-info">
                <h4>Emanuele Nasta</h4>
                <p>Premium Member</p>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">

        <!-- Music Page -->
        <div class="page active" id="music-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üéµ Musica Personalizzata</h1>
                        <p class="page-subtitle">L'AI seleziona la musica perfetta per il tuo stato mentale</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Scegli la tua modalit√†</h3>
                <div class="grid-3">
                    <div class="music-category" onclick="MusicPage.selectMode('focus')">
                        <div class="music-icon">‚òÄÔ∏è</div>
                        <h3>Focus Profondo</h3>
                        <p>Concentrazione massima</p>
                    </div>
                    <div class="music-category" onclick="MusicPage.selectMode('creative')">
                        <div class="music-icon">üé®</div>
                        <h3>Creativo</h3>
                        <p>Stimola l'ispirazione</p>
                    </div>
                    <div class="music-category" onclick="MusicPage.selectMode('relax')">
                        <div class="music-icon">üßò</div>
                        <h3>Relax</h3>
                        <p>Rigenerazione mentale</p>
                    </div>
                    <div class="music-category" onclick="MusicPage.selectMode('energy')">
                        <div class="music-icon">‚ö°</div>
                        <h3>Energia</h3>
                        <p>Carica mattutina</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Playlist AI Generate</h3>
                    <button class="btn btn-primary" onclick="MusicPage.generatePlaylist()">üîÑ Rigenera</button>
                </div>
                <div id="playlist-container">
                    <div class="playlist-item active" onclick="MusicPage.playTrack(0)">
                        <div class="playlist-icon">üéº</div>
                        <div>
                            <h4>Deep Focus Flow</h4>
                            <p style="color: #999;">Ambient ‚Ä¢ 45 min</p>
                        </div>
                    </div>
                    <div class="playlist-item" onclick="MusicPage.playTrack(1)">
                        <div class="playlist-icon">üéπ</div>
                        <div>
                            <h4>Calm Piano Sessions</h4>
                            <p style="color: #999;">Classical ‚Ä¢ 38 min</p>
                        </div>
                    </div>
                    <div class="playlist-item" onclick="MusicPage.playTrack(2)">
                        <div class="playlist-icon">üé∏</div>
                        <div>
                            <h4>Lo-fi Study Beats</h4>
                            <p style="color: #999;">Lo-fi ‚Ä¢ 52 min</p>
                        </div>
                    </div>
                </div>

                <div class="player-controls">
                    <button class="control-btn" onclick="MusicPage.previousTrack()">‚èÆÔ∏è</button>
                    <button class="control-btn play" id="musicPlayBtn" onclick="toggleMusicPlay()">‚ñ∂Ô∏è</button>
                    <button class="control-btn" onclick="MusicPage.nextTrack()">‚è≠Ô∏è</button>
                </div>
            </div>
        </div>

        <!-- Timer Page -->
        <div class="page" id="timer-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>‚è±Ô∏è Timer Pomodoro</h1>
                        <p class="page-subtitle">Gestisci il tuo tempo con la tecnica Pomodoro</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="timer-display">
                    <div class="timer-label">Sessione di Focus</div>
                    <div class="timer-circle">
                        <div class="timer-time" id="timerDisplay">25:00</div>
                    </div>
                    <div class="player-controls">
                        <button class="control-btn play" id="timerPlayBtn" onclick="toggleTimerPlay()">‚ñ∂Ô∏è</button>
                        <button class="control-btn" onclick="TimerPage.reset()">‚èπÔ∏è</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Preset Timer</h3>
                <div class="timer-presets">
                    <button class="preset-btn active" onclick="setTimerPreset(25, event)">Pomodoro (25m)</button>
                    <button class="preset-btn" onclick="setTimerPreset(5, event)">Pausa Breve (5m)</button>
                    <button class="preset-btn" onclick="setTimerPreset(15, event)">Pausa Lunga (15m)</button>
                    <button class="preset-btn" onclick="setTimerPreset(50, event)">Deep Work (50m)</button>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3 class="card-title">Oggi</h3>
                    <div style="text-align: center; padding: 2rem;">
                        <div style="font-size: 3rem; font-weight: bold; color: var(--primary);">4</div>
                        <div style="color: var(--text-secondary);">Pomodori completati</div>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title">Tempo Totale</h3>
                    <div style="text-align: center; padding: 2rem;">
                        <div style="font-size: 3rem; font-weight: bold; color: var(--success);">1h 40m</div>
                        <div style="color: var(--text-secondary);">Focus time oggi</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Calendar Page -->
        <div class="page" id="ai-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle" onmousedown="window.toggleSidebar(); return false;">‚ò∞</button>
                    <div class="page-title">
                        <h1>üß† Calendario Intelligente</h1>
                        <p class="page-subtitle">
                            L'AI organizza i tuoi impegni in modo ottimale
                        </p>
                    </div>
                </div>
            </div>

            <!-- Quick Add Task -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚ûï Aggiungi Impegno</h3>
                    <button class="btn btn-primary" onclick="AIPage.openTaskModal()">
                        Nuovo Impegno
                    </button>
                </div>
                <div id="quickAddForm" style="display: none; animation: slideDown 0.3s ease;">
                    <div class="form-group">
                        <label>Titolo Impegno</label>
                        <input type="text" id="taskTitle" placeholder="es. Riunione team, Studio progetto..."
                            class="form-input">
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Durata (minuti)</label>
                            <input type="number" id="taskDuration" placeholder="60" class="form-input" min="15"
                                step="15">
                        </div>
                        <div class="form-group">
                            <label>Priorit√†</label>
                            <select id="taskPriority" class="form-input">
                                <option value="alta">üî¥ Alta</option>
                                <option value="media" selected>üü° Media</option>
                                <option value="bassa">üü¢ Bassa</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Orario Specifico</label>
                            <input type="time" id="taskTime" class="form-input">
                            <small style="color: var(--text-secondary)">Lascia vuoto per suggerimento AI</small>
                        </div>
                        <div class="form-group">
                            <label>Frequenza</label>
                            <select id="taskFrequency" class="form-input" onchange="AIPage.handleFrequencyChange()">
                                <option value="once">Una volta (data specifica)</option>
                                <option value="daily">Giornaliero</option>
                                <option value="weekly">Settimanale</option>
                                <option value="multiple">Pi√π volte alla settimana</option>
                                <option value="monthly">Mensile</option>
                            </select>
                        </div>
                    </div>

                    <!-- Data Specifica per eventi "Una volta" -->
                    <div id="specificDateField" class="form-group" style="display: none;">
                        <label>üìÖ Data Evento</label>
                        <input type="date" id="taskDate" class="form-input">
                    </div>

                    <!-- Selezione giorni per frequenza settimanale/multipla -->
                    <div id="weekDaysField" class="form-group" style="display: none;">
                        <label>üìÜ Seleziona i giorni della settimana</label>
                        <div class="weekdays-selector">
                            <button type="button" class="weekday-btn" data-day="1" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Lun</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="2" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Mar</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="3" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Mer</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="4" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Gio</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="5" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Ven</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="6" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Sab</span>
                            </button>
                            <button type="button" class="weekday-btn" data-day="0" onclick="AIPage.toggleWeekday(this)">
                                <span class="day-short">Dom</span>
                            </button>
                        </div>
                        <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                            Clicca sui giorni per selezionarli/deselezionarli
                        </small>
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="taskCategory" class="form-input">
                            <option value="lavoro">üíº Lavoro</option>
                            <option value="studio">üìö Studio</option>
                            <option value="personale">üè† Personale</option>
                            <option value="sport">‚ö° Sport</option>
                            <option value="hobby">üé® Hobby</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn btn-primary" onclick="AIPage.addTask()" style="flex: 1;">
                            ‚ú® Aggiungi con AI
                        </button>
                        <button class="btn btn-secondary" onclick="AIPage.closeTaskModal()">
                            Annulla
                        </button>
                    </div>
                </div>
            </div>

            <!-- AI Suggestions -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üí° Suggerimenti AI</h3>
                    <button class="btn btn-secondary" onclick="AIPage.analyzeSchedule()"
                        style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                        üîÑ Analizza
                    </button>
                </div>
                <div id="aiSuggestions">
                    <div class="ai-suggestion">
                        <h4>üéØ Momento Ottimale Rilevato</h4>
                        <p>Basandoci sui tuoi pattern, le ore 10:00-12:00 sono ideali per attivit√† che richiedono alta
                            concentrazione.</p>
                    </div>
                    <div class="ai-suggestion">
                        <h4>‚ö†Ô∏è Sovraccarico Previsto</h4>
                        <p>Gioved√¨ hai 6 ore di impegni consecutivi. Considera di spostare qualche attivit√† a bassa
                            priorit√†.</p>
                    </div>
                </div>
            </div>

            <!-- Weekly Calendar View -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üìÖ Settimana Corrente</h3>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" onclick="AIPage.previousWeek()">‚óÄ</button>
                        <button class="btn btn-secondary" onclick="AIPage.nextWeek()">‚ñ∂</button>
                    </div>
                </div>
                <div id="weeklyCalendar" class="weekly-calendar">
                    <!-- Calendar will be generated here -->
                </div>
            </div>

            <!-- Today's Tasks -->
            <div class="grid-2">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìã Impegni di Oggi</h3>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-secondary" onclick="AIPage.clearCompletedTasks()"
                                title="Rimuovi impegni completati" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                                üóëÔ∏è Completati
                            </button>
                            <button class="btn btn-secondary" onclick="AIPage.clearPastTasks()"
                                title="Rimuovi eventi passati" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                                üßπ Passati
                            </button>
                        </div>
                    </div>
                    <div id="todayTasks" class="task-list">
                        <div class="task-item priority-alta">
                            <div class="task-time">09:00 - 10:30</div>
                            <div class="task-content">
                                <h4>üíº Riunione Team</h4>
                                <p>Lavoro ‚Ä¢ 90 minuti</p>
                            </div>
                            <div class="task-actions">
                                <button onclick="AIPage.completeTask(0)">‚úì</button>
                                <button onclick="AIPage.editTask(0)">‚úèÔ∏è</button>
                                <button onclick="AIPage.deleteTask(0)">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div class="task-item priority-media">
                            <div class="task-time">11:00 - 12:00</div>
                            <div class="task-content">
                                <h4>üìö Studio React</h4>
                                <p>Studio ‚Ä¢ 60 minuti</p>
                            </div>
                            <div class="task-actions">
                                <button onclick="AIPage.completeTask(1)">‚úì</button>
                                <button onclick="AIPage.editTask(1)">‚úèÔ∏è</button>
                                <button onclick="AIPage.deleteTask(1)">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div class="task-item priority-bassa">
                            <div class="task-time">Suggerito: 14:00</div>
                            <div class="task-content">
                                <h4>üè† Spesa settimanale</h4>
                                <p>Personale ‚Ä¢ 45 minuti</p>
                            </div>
                            <div class="task-actions">
                                <button onclick="AIPage.completeTask(2)">‚úì</button>
                                <button onclick="AIPage.editTask(2)">‚úèÔ∏è</button>
                                <button onclick="AIPage.deleteTask(2)">üóëÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìä Statistiche Settimanali</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value">12/18</div>
                            <div class="stat-label">Completati</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">‚è∞</div>
                            <div class="stat-value">24h</div>
                            <div class="stat-label">Tempo Totale</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-value">67%</div>
                            <div class="stat-label">Tasso Completamento</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-value">Alta</div>
                            <div class="stat-label">Produttivit√†</div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- Student Plan Page -->
        <div class="page" id="student-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle" onmousedown="window.toggleSidebar(); return false;">‚ò∞</button>
                    <div class="page-title">
                        <h1>üéì Piano Studente Pro</h1>
                        <p class="page-subtitle">
                            L'AI pianifica il tuo studio e ti prepara per le verifiche
                        </p>
                    </div>
                </div>
            </div>

            <!-- Add New Exam/Test -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‚ûï Nuova Verifica/Interrogazione</h3>
                    <button class="btn btn-primary" onclick="StudentPage.openExamModal()">
                        Aggiungi Prova
                    </button>
                </div>
                <div id="examForm" style="display: none; animation: slideDown 0.3s ease;">
                    <div class="form-group">
                        <label>Materia</label>
                        <input type="text" id="examSubject" placeholder="es. Matematica, Storia..." class="form-input">
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Tipo di Prova</label>
                            <select id="examType" class="form-input">
                                <option value="verifica">üìù Verifica Scritta</option>
                                <option value="interrogazione">üó£Ô∏è Interrogazione Orale</option>
                                <option value="compito">üìÑ Compito in Classe</option>
                                <option value="esame">üéØ Esame</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data della Prova</label>
                            <input type="date" id="examDate" class="form-input">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Argomenti da Studiare</label>
                        <textarea id="examTopics"
                            placeholder="Inserisci gli argomenti separati da virgola&#10;es. Equazioni di secondo grado, Parabola, Teorema di Pitagora..."
                            class="form-input" rows="4"></textarea>
                        <small style="color: var(--text-secondary);">Separa gli argomenti con una virgola</small>
                    </div>
                    <div class="grid-2">
                        <div class="form-group">
                            <label>Ore di Studio al Giorno</label>
                            <input type="number" id="studyHoursPerDay" placeholder="2" class="form-input" min="0.5"
                                max="8" step="0.5" value="2">
                        </div>
                        <div class="form-group">
                            <label>Ore di Esercitazione al Giorno</label>
                            <input type="number" id="practiceHoursPerDay" placeholder="1" class="form-input" min="0"
                                max="6" step="0.5" value="1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Difficolt√† Percepita</label>
                        <select id="examDifficulty" class="form-input">
                            <option value="facile">üü¢ Facile</option>
                            <option value="media" selected>üü° Media</option>
                            <option value="difficile">üî¥ Difficile</option>
                            <option value="molto-difficile">üî¥üî¥ Molto Difficile</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button type="button" class="btn btn-primary"
                            onclick="StudentPage.generateStudyPlan(); return false;" style="flex: 1;">
                            ‚ú® Genera Piano di Studio AI
                        </button>
                        <button type="button" class="btn btn-secondary"
                            onclick="StudentPage.closeExamModal(); return false;">
                            Annulla
                        </button>
                    </div>
                </div>
            </div>

            <!-- Active Study Plans -->
            <div class="card">
                <h3 class="card-title">üìö Piani di Studio Attivi</h3>
                <div id="activePlans" class="study-plans-container">
                    <!-- Plans will be rendered here -->
                </div>
            </div>

            <!-- Today's Study Sessions -->
            <div class="grid-2">
                <div class="card">
                    <h3 class="card-title">üìñ Sessioni di Oggi</h3>
                    <div id="todaySessions" class="sessions-list">
                        <!-- Today's sessions -->
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìä Statistiche Studio</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">üìö</div>
                            <div class="stat-value" id="totalStudyHours">0h</div>
                            <div class="stat-label">Ore Studiate</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-value" id="completedSessions">0</div>
                            <div class="stat-label">Sessioni Completate</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-value" id="averageGrade">-</div>
                            <div class="stat-label">Media Voti</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">üî•</div>
                            <div class="stat-value" id="studyStreak">0</div>
                            <div class="stat-label">Giorni Consecutivi</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Quiz Simulator -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">ü§ñ Simulatore Interrogazione AI</h3>
                    <button class="btn btn-primary" onclick="StudentPage.startAIQuiz()" id="startQuizBtn">
                        üéØ Inizia Interrogazione
                    </button>
                </div>
                <div id="quizContainer" style="display: none;">
                    <div class="quiz-interface">
                        <div class="form-group">
                            <label>Seleziona Materia da Interrogare</label>
                            <select id="quizSubject" class="form-input">
                                <option value="">-- Scegli una materia --</option>
                            </select>
                        </div>
                        <div id="quizArea" style="display: none;">
                            <div class="quiz-question-box">
                                <h4>Domanda AI:</h4>
                                <p id="quizQuestion"
                                    style="font-size: 1.1rem; line-height: 1.8; padding: 1rem; background: var(--bg-main); border-radius: 10px; margin: 1rem 0;">
                                    <!-- Question will appear here -->
                                </p>
                            </div>
                            <div class="form-group">
                                <label>La Tua Risposta:</label>
                                <textarea id="quizAnswer" class="form-input" rows="6"
                                    placeholder="Scrivi qui la tua risposta dettagliata..."></textarea>
                            </div>
                            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                <button class="btn btn-primary" onclick="StudentPage.submitAnswer()" style="flex: 1;">
                                    üì§ Invia Risposta
                                </button>
                                <button class="btn btn-secondary" onclick="StudentPage.nextQuestion()">
                                    ‚è≠Ô∏è Prossima Domanda
                                </button>
                                <button class="btn btn-secondary" onclick="StudentPage.endQuiz()">
                                    ‚èπÔ∏è Termina
                                </button>
                            </div>
                        </div>
                        <div id="quizFeedback" style="display: none; margin-top: 1.5rem;">
                            <!-- AI Feedback will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Completed Exams -->
            <div class="card">
                <h3 class="card-title">‚úÖ Prove Completate</h3>
                <div id="completedExams" class="completed-exams-list">
                    <!-- Completed exams with grades -->
                </div>
            </div>
        </div>
        <!-- Stats Page -->
        <div class="page" id="stats-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üìä Statistiche Dettagliate</h1>
                        <p class="page-subtitle">Monitora i tuoi progressi nel tempo</p>
                    </div>
                </div>
            </div>

            <div class="grid-3">
                <div class="stat-box">
                    <div>üî•</div>
                    <div class="stat-value">14</div>
                    <div class="stat-label">Giorni di Streak</div>
                </div>
                <div class="stat-box">
                    <div>‚è±Ô∏è</div>
                    <div class="stat-value">28h</div>
                    <div class="stat-label">Tempo Focus Totale</div>
                </div>
                <div class="stat-box">
                    <div>‚úÖ</div>
                    <div class="stat-value">47</div>
                    <div class="stat-label">Sessioni Completate</div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Produttivit√† Settimanale</h3>
                <div class="chart-container">
                    <div>
                        <div class="chart-bar" style="height: 220px;">
                            <div class="chart-value">5.5h</div>
                        </div>
                        <div class="chart-label">Lun</div>
                    </div>
                    <div>
                        <div class="chart-bar" style="height: 180px;">
                            <div class="chart-value">4.5h</div>
                        </div>
                        <div class="chart-label">Mar</div>
                    </div>
                    <div>
                        <div class="chart-bar" style="height: 240px;">
                            <div class="chart-value">6h</div>
                        </div>
                        <div class="chart-label">Mer</div>
                    </div>
                    <div>
                        <div class="chart-bar" style="height: 200px;">
                            <div class="chart-value">5h</div>
                        </div>
                        <div class="chart-label">Gio</div>
                    </div>
                    <div>
                        <div class="chart-bar" style="height: 160px;">
                            <div class="chart-value">4h</div>
                        </div>
                        <div class="chart-label">Ven</div>
                    </div>
                    <div>
                        <div class="chart-bar" style="height: 120px;">
                            <div class="chart-value">3h</div>
                        </div>
                        <div class="chart-label">Sab</div>
                    </div>
                    <div>
                        <div class="chart-bar" style="height: 100px;">
                            <div class="chart-value">2.5h</div>
                        </div>
                        <div class="chart-label">Dom</div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3 class="card-title">Modalit√† Preferite</h3>
                    <div style="padding: 1rem 0;">
                        <div style="margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>üéØ Focus Profondo</span>
                                <span style="font-weight: bold;">45%</span>
                            </div>
                            <div
                                style="height: 10px; background: var(--bg-main); border-radius: 5px; overflow: hidden;">
                                <div style="width: 45%; height: 100%; background: var(--primary);"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>üé® Creativo</span>
                                <span style="font-weight: bold;">30%</span>
                            </div>
                            <div
                                style="height: 10px; background: var(--bg-main); border-radius: 5px; overflow: hidden;">
                                <div style="width: 30%; height: 100%; background: var(--secondary);"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 1.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>üßò Relax</span>
                                <span style="font-weight: bold;">15%</span>
                            </div>
                            <div
                                style="height: 10px; background: var(--bg-main); border-radius: 5px; overflow: hidden;">
                                <div style="width: 15%; height: 100%; background: var(--success);"></div>
                            </div>
                        </div>
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>‚ö° Energia</span>
                                <span style="font-weight: bold;">10%</span>
                            </div>
                            <div
                                style="height: 10px; background: var(--bg-main); border-radius: 5px; overflow: hidden;">
                                <div style="width: 10%; height: 100%; background: var(--warning);"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">Obiettivi del Mese</h3>
                    <div style="padding: 1rem 0;">
                        <div style="margin-bottom: 2rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>üéØ 100 ore focus</span>
                                <span style="font-weight: bold;">28/100h</span>
                            </div>
                            <div
                                style="height: 12px; background: var(--bg-main); border-radius: 6px; overflow: hidden;">
                                <div
                                    style="width: 28%; height: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary));">
                                </div>
                            </div>
                        </div>
                        <div style="margin-bottom: 2rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>üî• 30 giorni streak</span>
                                <span style="font-weight: bold;">14/30</span>
                            </div>
                            <div
                                style="height: 12px; background: var(--bg-main); border-radius: 6px; overflow: hidden;">
                                <div
                                    style="width: 47%; height: 100%; background: linear-gradient(90deg, var(--warning), var(--danger));">
                                </div>
                            </div>
                        </div>
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span>‚úÖ 200 pomodori</span>
                                <span style="font-weight: bold;">47/200</span>
                            </div>
                            <div
                                style="height: 12px; background: var(--bg-main); border-radius: 6px; overflow: hidden;">
                                <div
                                    style="width: 24%; height: 100%; background: linear-gradient(90deg, var(--success), var(--info));">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Andamento Mensile</h3>
                <div style="padding: 2rem; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìà</div>
                    <div style="font-size: 2rem; font-weight: bold; color: var(--success); margin-bottom: 0.5rem;">+34%
                    </div>
                    <div style="color: var(--text-secondary);">Miglioramento rispetto al mese scorso</div>
                    <div style="margin-top: 2rem; padding: 1rem; background: var(--bg-main); border-radius: 10px;">
                        <p style="color: var(--text-secondary);">Ottimo lavoro! Mantieni questo ritmo e raggiungerai i
                            tuoi obiettivi mensili con 5 giorni di anticipo.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sounds Page -->
        <div class="page" id="sounds-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üåä Suoni Ambientali</h1>
                        <p class="page-subtitle">Crea l'atmosfera perfetta per la concentrazione</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Seleziona i tuoi suoni</h3>
                <div class="grid-3">
                    <div class="sound-card" onclick="toggleSoundCard(this, 'rain')">
                        <div class="sound-icon">üåßÔ∏è</div>
                        <h4>Pioggia</h4>
                        <p style="color: var(--text-secondary);">Pioggia rilassante</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'rain')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'waves')">
                        <div class="sound-icon">üåä</div>
                        <h4>Onde del Mare</h4>
                        <p style="color: var(--text-secondary);">Onde sulla spiaggia</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'waves')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'forest')">
                        <div class="sound-icon">üå≤</div>
                        <h4>Foresta</h4>
                        <p style="color: var(--text-secondary);">Natura e uccelli</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'forest')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'fire')">
                        <div class="sound-icon">üî•</div>
                        <h4>Camino</h4>
                        <p style="color: var(--text-secondary);">Fuoco scoppiettante</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'fire')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'cafe')">
                        <div class="sound-icon">‚òï</div>
                        <h4>Caffetteria</h4>
                        <p style="color: var(--text-secondary);">Chiacchiere di fondo</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'cafe')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'whitenoise')">
                        <div class="sound-icon">üìª</div>
                        <h4>Rumore Bianco</h4>
                        <p style="color: var(--text-secondary);">Blocca distrazioni</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'whitenoise')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'thunder')">
                        <div class="sound-icon">‚õàÔ∏è</div>
                        <h4>Temporale</h4>
                        <p style="color: var(--text-secondary);">Tuoni e pioggia</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'thunder')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'wind')">
                        <div class="sound-icon">üí®</div>
                        <h4>Vento</h4>
                        <p style="color: var(--text-secondary);">Brezza leggera</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'wind')">
                        </div>
                    </div>
                    <div class="sound-card" onclick="toggleSoundCard(this, 'night')">
                        <div class="sound-icon">üåô</div>
                        <h4>Notte</h4>
                        <p style="color: var(--text-secondary);">Grilli notturni</p>
                        <div class="volume-control">
                            <input type="range" class="volume-slider" min="0" max="100" value="0"
                                onchange="adjustSoundVolume(this, 'night')">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Mix Personalizzati</h3>
                    <button class="btn btn-primary" onclick="saveSoundMix()">üíæ Salva Mix</button>
                </div>
                <div class="grid-2">
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('focus')">
                        <h4 style="margin-bottom: 1rem;">üéØ Focus Intenso</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Pioggia + Rumore Bianco + Camino</p>
                    </div>
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('relax')">
                        <h4 style="margin-bottom: 1rem;">üßò Relax Totale</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Onde + Foresta + Vento</p>
                    </div>
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('study')">
                        <h4 style="margin-bottom: 1rem;">üìö Studio</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Caffetteria + Pioggia Leggera</p>
                    </div>
                    <div style="padding: 1.5rem; background: var(--bg-main); border-radius: 15px; cursor: pointer;"
                        onclick="SoundsPage.loadPreset('sleep')">
                        <h4 style="margin-bottom: 1rem;">üò¥ Sonno</h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Notte + Onde + Camino</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Focus Mode Page -->
        <div class="page" id="focus-page">
            <div class="page-header">
                <div>
                    <button class="menu-toggle"
                        onclick="document.getElementById('sidebar').classList.toggle('visible')">‚ò∞</button>
                    <div class="page-title">
                        <h1>üéØ Modalit√† Focus</h1>
                        <p class="page-subtitle">Zero distrazioni, massima concentrazione</p>
                    </div>
                </div>
            </div>

            <div class="card focus-mode-card">
                <h2 style="margin-bottom: 1rem;">Sessione Focus Attiva</h2>
                <p style="opacity: 0.9; margin-bottom: 2rem;">Tutte le distrazioni sono bloccate</p>
                <div class="focus-timer" id="focusTimer">45:00</div>
                <div class="player-controls">
                    <button class="control-btn play" id="focusPlayBtn" onclick="toggleFocusPlay()">‚ñ∂Ô∏è</button>
                    <button class="control-btn" onclick="FocusPage.end()">‚èπÔ∏è</button>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Blocco Distrazioni</h3>
                <div class="distraction-blocker">
                    <div class="blocker-item">
                        <span>üì± Notifiche</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'notifications')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="blocker-item">
                        <span>üåê Social Media</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'social')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="blocker-item">
                        <span>üìß Email</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'email')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="blocker-item">
                        <span>üí¨ Chat</span>
                        <div class="toggle-switch active" onclick="toggleBlockerSwitch(this, 'chat')">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3 class="card-title">Impostazioni Focus</h3>
                    <div style="padding: 1rem 0;">
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Durata
                                Sessione</label>
                            <select
                                style="width: 100%; padding: 0.8rem; border: 2px solid var(--bg-main); border-radius: 10px; font-size: 1rem;"
                                onchange="FocusPage.setDuration(this.value)">
                                <option value="25">25 minuti</option>
                                <option value="45" selected>45 minuti</option>
                                <option value="60">60 minuti</option>
                                <option value="90">90 minuti</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Modalit√†
                                Schermo</label>
                            <select
                                style="width: 100%; padding: 0.8rem; border: 2px solid var(--bg-main); border-radius: 10px; font-size: 1rem;">
                                <option>Normale</option>
                                <option>Schermo Scuro</option>
                                <option selected>Minimalista</option>
                                <option>Zen Mode</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" checked style="width: 20px; height: 20px;">
                                <span>Avvia musica automaticamente</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">Sessioni Oggi</h3>
                    <div style="padding: 1rem 0;">
                        <div
                            style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--bg-main); border-radius: 10px; margin-bottom: 1rem;">
                            <div
                                style="width: 50px; height: 50px; background: var(--success); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                ‚úì</div>
                            <div>
                                <h4>Focus Mattutino</h4>
                                <p style="color: var(--text-secondary); font-size: 0.9rem;">09:00 - 09:45 (45 min)</p>
                            </div>
                        </div>
                        <div
                            style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--bg-main); border-radius: 10px; margin-bottom: 1rem;">
                            <div
                                style="width: 50px; height: 50px; background: var(--success); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                ‚úì</div>
                            <div>
                                <h4>Deep Work</h4>
                                <p style="color: var(--text-secondary); font-size: 0.9rem;">11:00 - 12:00 (60 min)</p>
                            </div>
                        </div>
                        <div
                            style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, #667eea15, #764ba215); border-radius: 10px; border: 2px solid var(--primary);">
                            <div
                                style="width: 50px; height: 50px; background: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                ‚ñ∂Ô∏è</div>
                            <div>
                                <h4>In Corso...</h4>
                                <p style="color: var(--text-secondary); font-size: 0.9rem;">15:00 - 15:45 (45 min)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">Citazione Motivazionale</h3>
                <div style="text-align: center; padding: 2rem;">
                    <div style="font-size: 2rem; margin-bottom: 1rem;">üí≠</div>
                    <p style="font-size: 1.3rem; font-style: italic; color: var(--text-primary); margin-bottom: 1rem;">
                        "La concentrazione √® la radice di tutte le abilit√† superiori dell'uomo."
                    </p>
                    <p style="color: var(--text-secondary);">‚Äî Bruce Lee</p>
                </div>
            </div>
        </div>

    </main>

    <!-- JavaScript Files -->
    <script src="js/storage.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/pages/music.js"></script>
    <script src="js/pages/timer.js"></script>
    <script src="js/pages/calendar.js"></script>
    <script src="js/pages/stats.js"></script>
    <script src="js/pages/sounds.js"></script>
    <script src="js/pages/focus.js"></script>
    <script src="js/pages/student.js"></script>
    <script src="js/app.js"></script>

</body>

</html>
